<section class="container wrap">
  <div class="col-12 md:col-6 justify-content-center align-items-center m-auto">
    <p-dropdown
      [options]="productsChoose"
      [(ngModel)]="selectedProduct"
      optionLabel="name"
      placeholder="Select Product"
      styleClass="w-full"
      [autoOptionFocus]="false"
      (onChange)="chooseProduct($event)"
    />
  </div>
  <div class="col-12 md:col-6 justify-content-center align-items-center m-auto">
    <p-carousel
      [value]="banners"
      [numVisible]="1"
      [numScroll]="1"
      [circular]="true"
      [responsiveOptions]="responsiveOptions"
      [autoplayInterval]="3000"
    >
      <ng-template let-product pTemplate="item">
        <div>
          <div class="mb-3">
            <div class="relative mx-auto">
              <img
                src="../../../../../assets/img/ads/{{ product.image }}"
                [alt]="product.name"
                class="w-full border-round"
              />
            </div>
            <h3 class="p-white text-center">{{ product.name }}</h3>
          </div>
        </div>
      </ng-template>
    </p-carousel>
  </div>

  <div *ngIf="selectedProduct.code == 'TS'" id="ts">
    <div id="tshirt" #ds class="mt-30 p-2">
      <div #ds class="flex justify-content-between">
        <i
          class="mb-3 pi pi-th-large text-2xl text-color-secondary box"
          (click)="templatePanels($event)"
        ></i>
        <i
          class="mb-3 pi pi-cog text-2xl text-color-secondary box"
          (click)="settingsPanels($event)"
        ></i>
      </div>
      <div
        class="flex flex-column justify-content-center align-items-center mt-4 relative"
      >
        <i class="click-on">Click on the text box to modify your content</i>
        <div class="relative">
          <img
            src="../../../../../assets/img/tee/{{ order.model }}.png"
            height="300"
          />

          <div *ngFor="let t of selectedTemplate.data" class="z-1">
            @if(t.type=="1"){

            <input
              type="text"
              value="1"
              maxlength="{{ t.max }}"
              [ngClass]="selectedTemplate.tName == '01' ? order.pattern : ''"
              [(ngModel)]="t.text"
              [ngStyle]="{
                position: 'absolute',
                top: t.tTop + 'px',
                left: t.tLeft + 'px',
                background: 'transparent',
                border: '1px dashed rgb(46 46 46)',
                color: t.color,
                'font-size': t.size + 'px',
                'font-weight': t.weight,
                width: t.width + 'px',
                opacity: '0.7',
                'font-family': t.font,
                'letter-spacing': t.space + 'px',
                'text-align': 'center'
              }"
            />
            } @if(t.type=="2"){
            <input
              type="text"
              value="2"
              [(ngModel)]="t.text"
              [ngClass]="selectedTemplate.tName == '01' ? order.pattern : ''"
              [ngStyle]="{
                position: 'absolute',
                top: t.tTop + 'px',
                left: t.tLeft + 'px',
                background: 'transparent',
                border: '1px dashed rgb(46 46 46)',
                color: t.color,
                'font-size': t.size + 'px',
                'font-weight': t.weight,
                width: t.width + 'px',
                opacity: '0.7',
                'font-family': t.font,
                'letter-spacing': t.space + 'px',
                'text-align': 'center'
              }"
            />
            } @if(t.type=="3"){
            <textarea
              rows="10"
              value="3"
              maxlength="{{ t.max }}"
              [ngClass]="selectedTemplate.tName == '01' ? order.pattern : ''"
              [(ngModel)]="t.text"
              [ngStyle]="{
                position: 'absolute',
                top: t.tTop + 'px',
                left: t.tLeft + 'px',
                background: 'transparent',
                border: '1px dashed rgb(46 46 46)',
                color: t.color,
                'font-size': t.size + 'px',
                'font-weight': t.weight,
                width: t.width + 'px',
                opacity: '0.7',
                resize: 'none',
                'font-family': t.font,
                overflow: 'hidden',
                height: t.height + 'px',
                'letter-spacing': t.space + 'px',
                'text-align': 'center'
              }"
            >
            </textarea>
            } @if(t.type=="4"){
            <input
              type="text"
              value="4"
              [(ngModel)]="t.text"
              [ngClass]="selectedTemplate.tName == '01' ? order.pattern : ''"
              [ngStyle]="{
                position: 'absolute',
                top: t.tTop + 'px',
                left: t.tLeft + 'px',
                background: 'transparent',
                border: '1px dashed rgb(46 46 46)',
                color: t.color,
                'font-size': t.size + 'px',
                'font-weight': t.weight,
                width: t.width + 'px',
                opacity: '0.7',
                'font-family': t.font,
                'letter-spacing': t.space + 'px',
                'text-align': 'center'
              }"
            />
            }
          </div>
        </div>
        <div class="relative">
          <button
            pButton
            pRipple
            (click)="op.toggle($event); setOrder()"
            label="Buy Now"
            class="p-button-primary w-full text-center mt-5 block"
          ></button>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="selectedProduct.code == 'HD'" id="hd" class="text-center mt-30">
    <div id="placeholder" #ds class="mt-30 p-2">
      <div #ds class="flex justify-content-between">
        <i
          class="mb-3 pi pi-th-large text-2xl text-color-secondary box"
          (click)="templatePanels($event)"
        ></i>
        <i
          class="mb-3 pi pi-cog text-2xl text-color-secondary box"
          (click)="settingsPanels($event)"
        ></i>
      </div>
      <div
        class="flex flex-column justify-content-center align-items-center mt-4 relative"
      >
        <i class="click-on">Click on the text box to modify your content</i>
        <div class="relative">
          <img
            src="../../../../../assets/img/hoodie/{{ order.model }}.png"
            height="300"
          />

          <div *ngFor="let t of selectedTemplate.data" class="z-1">
            @if(t.type=="1"){

            <input
              type="text"
              value="1"
              #myinput
              maxlength="{{ t.max }}"
              [ngClass]="selectedTemplate.tName == '01' ? order.pattern : ''"
              [(ngModel)]="t.text"
              [ngStyle]="{
                position: 'absolute',
                top: t.top + 'px',
                left: t.left + 'px',
                background: 'transparent',
                border: '1px dashed rgb(46 46 46)',
                color: t.color,
                'font-size': t.size + 'px',
                'font-weight': t.weight,
                width: t.width + 'px',
                opacity: '0.7',
                'font-family': t.font,
                'letter-spacing': t.space + 'px',
                'text-align': 'center'
              }"
            />
            } @if(t.type=="2"){
            <input
              type="text"
              value="2"
              [ngClass]="selectedTemplate.tName == '01' ? order.pattern : ''"
              [(ngModel)]="t.text"
              [ngStyle]="{
                position: 'absolute',
                top: t.top + 'px',
                left: t.left + 'px',
                background: 'transparent',
                border: '1px dashed rgb(46 46 46)',
                color: t.color,
                'font-size': t.size + 'px',
                'font-weight': t.weight,
                width: t.width + 'px',
                opacity: '0.7',
                'font-family': t.font,
                'letter-spacing': t.space + 'px',
                'text-align': 'center'
              }"
            />
            } @if(t.type=="3"){
            <textarea
              rows="10"
              value="3"
              [ngClass]="selectedTemplate.tName == '01' ? order.pattern : ''"
              maxlength="{{ t.max }}"
              [(ngModel)]="t.text"
              [ngStyle]="{
                position: 'absolute',
                top: t.top + 'px',
                left: t.left + 'px',
                background: 'transparent',
                border: '1px dashed rgb(46 46 46)',
                color: t.color,
                'font-size': t.size + 'px',
                'font-weight': t.weight,
                width: t.width + 'px',
                opacity: '0.7',
                resize: 'none',
                'font-family': t.font,
                overflow: 'hidden',
                height: t.height + 'px',
                'letter-spacing': t.space + 'px',
                'text-align': 'center'
              }"
            >
            </textarea>
            } @if(t.type=="4"){
            <input
              type="text"
              value="4"
              [ngClass]="selectedTemplate.tName == '01' ? order.pattern : ''"
              [(ngModel)]="t.text"
              [ngStyle]="{
                position: 'absolute',
                top: t.top + 'px',
                left: t.left + 'px',
                background: 'transparent',
                border: '1px dashed rgb(46 46 46)',
                color: t.color,
                'font-size': t.size + 'px',
                'font-weight': t.weight,
                width: t.width + 'px',
                opacity: '0.7',
                'font-family': t.font,
                'letter-spacing': t.space + 'px',
                'text-align': 'center'
              }"
            />
            }
          </div>
          <!-- <h2
            class="selectedPattern"
            [ngClass]="order.pattern"
            [ngStyle]="getStyle()"
          >
            <span [ngClass]="getSpace()">{{ order.text }}</span>
          </h2> -->
        </div>
        <div class="relative">
          <button
            pButton
            pRipple
            label="Buy Now"
            (click)="op.toggle($event); setOrder()"
            class="p-button-primary w-full text-center mt-5 block"
          ></button>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="selectedProduct.code == 'MG'" id="mg" class="text-center mt-30">
    <h3>Coming Soon</h3>
  </div>
</section>

<p-overlayPanel #op>
  <h3 class="mt-0">Pricing</h3>
  <div>
    <div class="flex gap-2 justify-content-between">
      <strong class="text-xs">Price</strong
      ><span class="text-xs">{{ pricing.price }}</span>
    </div>
    <div class="flex gap-2 justify-content-between">
      <strong class="text-xs">Discount({{ pricing.discount }}%)</strong
      ><span class="text-xs">{{ pricing.offerPrice }}</span>
    </div>
    <hr />
    <div class="flex gap-2 justify-content-between mb-4">
      <strong class="text-xs">Total pay</strong
      ><span class="text-xs">{{ pricing.offerPrice }}</span>
    </div>
  </div>

  <div>
    <h5 class="m-0">Order through</h5>
    <button
      pButton
      pRipple
      (click)="signIn()"
      label="SignIn"
      class="p-button-primary w-full text-center mt-2 block"
    ></button>
    <a
      pButton
      pRipple
      [href]="whatsapp"
      target="_blank"
      (click)="whatsApp()"
      label="Whatsapp"
      class="p-button-success w-full text-center mt-2 block no-underline"
    ></a>
  </div>
</p-overlayPanel>

<p-overlayPanel
  #settingsPanel
  [dismissable]="true"
  [appendTo]="'body'"
  [showCloseIcon]="true"
  styleClass="settings"
>
  <div class="flex flex-column">
    @if(selectedProduct.code == 'HD') {
    <div>
      <h5 class="my-1">Fabric Color</h5>
      <div class="flex gap-2">
        <div *ngFor="let hc of hColors">
          <div [ngClass]="hc == order.model ? 'active' : 'default'">
            <span class="props" [ngClass]="hc" (click)="selectedTc(hc)"> </span>
          </div>
        </div>
      </div>
    </div>
    } @if(selectedProduct.code== 'TS') {
    <div>
      <h5 class="my-1">Fabric Color</h5>
      <div class="flex gap-2">
        <div *ngFor="let tc of tColors">
          <div [ngClass]="tc == order.model ? 'active' : 'default'">
            <span class="props" [ngClass]="tc" (click)="selectedTc(tc)"> </span>
          </div>
        </div>
      </div>
    </div>
    }
    <div>
      <h5 class="my-1">Print Color</h5>
      <div class="flex gap-2">
        <div *ngFor="let pc of pbColors">
          <div [ngClass]="'p-' + pc == order.pattern ? 'active' : 'default'">
            <span class="props" [ngClass]="pc" (click)="selectedPc(pc)">
              <img
                *ngIf="pc == 'metalic' || pc == 'glitter'"
                src="../../../../../assets/img/ads/{{ pc }}.png"
                width="16"
                alt="pattern"
            /></span>
          </div>
        </div>
      </div>
    </div>
    <div>
      <h5 class="my-1">Fabric Size</h5>
      <div class="flex gap-2">
        <div *ngFor="let ts of tSizes">
          <div [ngClass]="ts == order.size ? 'active' : 'default'">
            <span class="props" [ngClass]="ts" (click)="selectedTs(ts)">
              {{ ts }}
            </span>
          </div>
        </div>
      </div>
      <div class="font-options">
        <p-dropdown
          [options]="fonts"
          [(ngModel)]="selectedFont"
          optionLabel="name"
          placeholder="Select Font"
          styleClass="w-full"
          [autoOptionFocus]="false"
          (onChange)="chooseFont($event)"
        />
      </div>
      <div class="flex gap-2">
        <div class="font-options">
          <p-dropdown
            [options]="fontsizeOptions"
            [(ngModel)]="selectedFontSize"
            optionLabel="name"
            placeholder="Select Font Size"
            styleClass="w-full"
            [autoOptionFocus]="false"
            (onChange)="chooseFontSize($event)"
          />
        </div>
        <div class="font-options">
          <p-dropdown
            [options]="letterSpaceOptions"
            [(ngModel)]="selectedLetterSpace"
            optionLabel="name"
            placeholder="Select Letter Space"
            styleClass="w-full"
            [autoOptionFocus]="false"
            (onChange)="chooseLetterSpace($event)"
          />
        </div>
      </div>

      <div class="guidelines">
        <div (click)="toggleGuidelines()" class="text-1 underline">
          Guidelines
        </div>

        @if(showGuidelines) {
        <div class="mt-3">
          <em class="text-xs"
            ><strong>Note:</strong> Sizes may rarely vary in the range of +/-
            0.5 inches.</em
          >
          <p-table [value]="products" class=" ">
            <ng-template pTemplate="header">
              <tr>
                <th>Inches</th>
                <th>XS</th>
                <th>S</th>
                <th>M</th>
                <th>L</th>
                <th>XL</th>
                <th>XXL</th>
                <th>XXXL</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-product>
              <tr>
                <td>{{ product.inch }}</td>
                <td>{{ product.xs }}</td>
                <td>{{ product.s }}</td>
                <td>{{ product.m }}</td>
                <td>{{ product.l }}</td>
                <td>{{ product.xl }}</td>
                <td>{{ product.xxl }}</td>
                <td>{{ product.xxxl }}</td>
              </tr>
            </ng-template>
          </p-table>
        </div>
        }
      </div>
    </div>
  </div>
</p-overlayPanel>
<p-overlayPanel
  #templatePanel
  [dismissable]="true"
  [appendTo]="'body'"
  [showCloseIcon]="true"
  styleClass="settings"
>
  <div style="height: 300px" class="scrollable">
    <div
      *ngFor="let t of templates"
      (click)="selectTemplate(t)"
      class="border-yellow"
    >
      <img src="{{ t.url }}" alt="template" width="100" />
    </div>
  </div>
</p-overlayPanel>
